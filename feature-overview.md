This document provides a summary overview of the Prism features, design, and related considerations. The full design starts [here.](https://github.com/kappnav/design/blob/master/README.md#prism-design) ## Features Prism Application Navigator 1. [Resource and Basic Visualization](https://bigblue.aha.io/features/ICPRIVATE-31) 1. [Status and Actions](https://bigblue.aha.io/features/ICPRIVATE-56) 1. [Cell View](https://bigblue.aha.io/features/ICPRIVATE-57) 1. [Dev-ops Support](https://bigblue.aha.io/features/ICPRIVATE-64) ## Customer Overview Prism Application Navigator is an ICP add-on that provides a holistic view of deployed applications, their components, and configurable menu links to in-context, related tools. It includes special integration with VM Quickstarter to bring WAS ND Apps into the same experience. ## Key Concepts 1. kubernetes application custom resource definition (CRD) An application resource (CRD instance) represents a discrete application. 1. application composition by label selectors Label selectors are rules in an application resource that select other resources, called components, that possess labels that satisfy the selector criteria. 1. WAS ND Apps represented in kubernetes by a CRD WAS ND Apps that exist in a WAS VM Quickstarter cell are represented in Kubernetes as resources, which can be included into an application via label selection. 1. prism visualization is: list of application, with drill down into components The basic premis of the Prism Application Navigator is to display a list of application resources, with drill down into each application's components, according to the application's label selector rule. 1. configurable menus allow "kind specific" menu items to link to other tools For each application and each component, Prism supports configuable menus. These menus are comprised of menu items (actions) that can be configured by resource kind or resource instance. The actions provide navigational linkage in the browser to various tools and views that are relevant to the application and/or specific component. 1. special integration with WAS VM Quickstarter to represent WAS ND cells via a CRD WAS VM QuickStarter has special integration with Prism, whereby it register WAS ND cells and applications for inclusion within Prism views, according to user preferences. ## User stories ## As-is ICP console provides only infrastructure view of resources. It provides no way to visually understand which resource comprise a specific application. Additionally, there are various tools and their respective UIs that a user (e.g. Todd persona) must locate, remember, and access to fully interact with an application. e.g. ![As-is-1](https://github.com/kappnav/design/blob/master/images/as-is-1.png) ![As-is-2](https://github.com/kappnav/design/blob/master/images/as-is-2.png) ![As-is-3](https://github.com/kappnav/design/blob/master/images/as-is-3.png) ## To-be ![To-be-1](https://github.com/kappnav/design/blob/master/images/to-be-1.png) ![To-be-2](https://github.com/kappnav/design/blob/master/images/to-be-2.png) ## Main Feature design ### Visual Experience **Application View** ![appview](https://github.com/kappnav/design/blob/master/images/application-table-view.png) **Component View** ![compview](https://github.com/kappnav/design/blob/master/images/component-table-view-2.png) ### Architecture ![arch](https://github.com/kappnav/design/blob/master/images/prism-component-architecture.png) ### Custom Resource Definitions The Kubernetes extension mechanism, Custom Resource Definitions, is used to introduce the following additional kinds: 1. [Application](https://github.com/kubernetes-sigs/application/blob/42782aebdc651ba13071eebd6b58d50484237b37/hack/install.yaml#L46) Represents an application and it's components. Uses label selectors to identify comprised components. 1. [WAS-ND-Cell](https://github.ibm.com/WASCloudPrivate/prism/blob/master/crds/was-nd-cell.yaml) Represents a WAS cell. To be used by VM Quickstarter to make cells under its management visible in the ICP console. 1. [WAS-ND-App](https://github.ibm.com/WASCloudPrivate/prism/blob/master/crds/was-nd-app.yaml) Represents a WAS app in an ND cell. To be used by VM Quickstarter to make WAS ND apps visible in the ICP console. These apps can be included in application views, according to application label matching. ### Action Config Maps [Action config maps](https://github.com/kappnav/design/blob/master/actions-config-maps.md) provide a way to define action URLs per resource kind, or optionally per resource instance; there is a hiearchy and override scheme so that default actions and be tailored for specific cases. Action URLs are comprised of substitution patterns that are resolved dynamically at time of use. Here's a fictitious action config map for the Deployment resource kind. ``` apiVersion: v1 kind: ConfigMap metadata: name: prism.deployment namespace: prism data: url-actions: | [ {"name":”config",”description":”Edit Config","url":"https://${server}/serverConfig"} {"name":”monitor",”description":”View Monitor","url":"https://${server}/serverMonitor"} ] ``` ### Prism APIs. Prism will provide CRUD APIs for the following resources: 1. Application 1. WAS-ND-Cell 1. WAS-ND-App 1. Action config maps 1. Cell credential secrets ### VM Quickstarter Exploitation Outside of the Prism features, VM QuickStarter will be updated to create WAS-ND-Cell and WAS-ND-App resources to represent in ICP (Kubernetes) those artifacts under it's management. This provides a view of these cell-based resources from the ICP console. ## Administration, Configuration, & Command Line Prism will be installed via Helm chart into ICP. ## Monitoring, Serviceability Prism is a cloud native app. It will leverage ICP monitoring. It will use platform logging for errors. ## Security MVP will use ICP single sign-on authentication. RBAC will be evaluated for a future release. ## Performance No special considerations. ## Test Automation Impact Automated tests will be developed to test Prism APIs. ## Container considerations No special considerations. Prism will consist of two container images: one for the UI; another for the APIs. ## IBM Cloud public and private considerations Runs the same on both IBM public and private clouds. There are special network considerations and recommendations for hybrid configurations. E.g. Prism on private cloud w/Quickstarter on public, VPN to secure networking between the two. ## GDPR considerations No concerns. ## SVT scenarios 1. [Scale up/down](https://github.ibm.com/WASCloudPrivate/roadmap/issues/620) (replicas) 1. [Large data](https://github.ibm.com/WASCloudPrivate/roadmap/issues/621) (test performance with larger and larger data set) 1. [Long run](https://github.ibm.com/WASCloudPrivate/roadmap/issues/622) - Prism app can run for a long time without blowing up or tanking the system. ## Developer Experience Microclimate will be updated to create Application resources as part of cloud native projects. ## Communication: Doc / blogs / tutorials / videos / playback 1. Sub-tribe playback 1. Knowledge Center articles 1. Blog post 1. Youtube video
